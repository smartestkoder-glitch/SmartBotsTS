generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  schemas  = ["autosell", "bots", "parsedm", "telegram"]
}

model AutoSellBuys {
  id         Int        @id @default(autoincrement())
  message    String
  price      Int?
  item       String?
  count      Int?
  dealer     String?
  date       DateTime   @default(now())
  botId      Int
  Bot BotsConfig @relation(fields: [botId], references: [id])

  @@map("Buys")
  @@schema("autosell")
}

model PriceConfig {
  id        Int    @id @default(autoincrement())
  itemName  String
  potion String?
  priceSell Int
  priceBuy  Int

  @@schema("autosell")
}

model AutoSellSells {
  id         Int        @id @default(autoincrement())
  message    String
  date       DateTime   @default(now())
  botId      Int
  count      Int?
  item       String?
  price      Int?
  Bot BotsConfig @relation(fields: [botId], references: [id])

  @@map("Sells")
  @@schema("autosell")
}

model BotsConfig {
  id       Int     @id @default(autoincrement())
  nick     String
  server   String
  version String

  donate   String?
  money    Int?

  busyNick Boolean @default(false)

  online Boolean @default(false)
  banned Boolean @default(false)

  Buys  AutoSellBuys[]
  Sells AutoSellSells[]



  proxyId Int
  Proxy   Proxy @relation(fields: [proxyId], references: [id])


  settings BotSettings?

  DMBuys DMBuys[]
  kicks        Kicks[]
  bans         Bans[]
  deaths Deaths[]
  chatMessages ChatMessages[]

  @@schema("bots")
}

model BotSettings {
  id       Int     @id @default(autoincrement())
  botId Int @unique
  Bot BotsConfig @relation(fields: [botId], references: [id])

  password String?
  anarchy String?

  scriptId Int?
  Scripts  Scripts? @relation(fields: [scriptId], references: [id])

  @@schema("bots")
}

model Kicks {
  id   Int    @id @default(autoincrement())
  text String?
  json String

  botId Int
  Bot   BotsConfig @relation(fields: [botId], references: [id])

  time DateTime @default(now())

  @@schema("bots")
}

model Deaths {
  id   Int    @id @default(autoincrement())


  botId Int
  Bot   BotsConfig @relation(fields: [botId], references: [id])

  time DateTime @default(now())

  @@schema("bots")
}

model Bans {
  id   Int    @id @default(autoincrement())
  text String?
  json String

  botId Int
  Bot   BotsConfig @relation(fields: [botId], references: [id])

  time DateTime @default(now())

  @@schema("bots")
}

model ChatMessages {
  id   Int    @id @default(autoincrement())
  text String?
  json String

  botId Int
  Bot   BotsConfig @relation(fields: [botId], references: [id])

  time DateTime @default(now())

  @@schema("bots")
}

model Proxy {
  id Int @id @default(autoincrement())

  proxy String @unique
  bots  BotsConfig[]

  @@schema("bots")
}

model Scripts {
  id         Int          @id @default(autoincrement())
  name       String @unique
  creatAt    DateTime     @default(now())
  Bots BotSettings[]

  @@schema("bots")
}

model DMBuys {
  id         Int        @id @default(autoincrement())
  dealer     String?
  price      BigInt?
  course     Int?
  name       String?
  success    Boolean?
  time       DateTime   @default(now())
  botId      Int
  Bot BotsConfig @relation(fields: [botId], references: [id])

  @@schema("parsedm")
}

model AutoDMPages {
  id       Int      @id @default(autoincrement())
  time     DateTime @default(now())
  marketMy Int
  Slots    AutoDMSlots[]

  @@map("Pages")
  @@schema("parsedm")
}

model AutoDMSlots {
  id          Int     @id @default(autoincrement())
  name        String
  price       BigInt
  course      Int
  marketPrice Int
  purpose     String?
  dealer      String
  slot Int?
  pageId      Int
  Pages       AutoDMPages   @relation(fields: [pageId], references: [id])

  @@map("Slots")
  @@schema("parsedm")
}

model TelegramRoles {
  id    Int             @id @default(autoincrement())
  name  String          @unique
  Users TelegramUsers[]

  @@map("Roles")
  @@schema("telegram")
}

model TelegramUsers {
  id        Int           @id @default(autoincrement())
  userId    BigInt        @unique
  username  String?
  name      String?
  roleId    Int
  createdAt DateTime      @default(now())
  Role      TelegramRoles @relation(fields: [roleId], references: [id])

  @@map("Users")
  @@schema("telegram")
}
